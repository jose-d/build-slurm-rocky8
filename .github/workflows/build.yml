---
name: release
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  job001:
    name: Build pmix
    runs-on: ubuntu-latest
    container:
      image: rockylinux/rockylinux:8
      options: --privileged
    steps:
      - name: Prepare base build env
        run: |
          dnf install -y dnf-plugins-core
          dnf config-manager --set-enabled powertools
          dnf install -y rpm-build automake autoconf libtool make pkg-config less vim flex bison doxygen cmake bash-doc which wget
          dnf upgrade -y
          mkdir -p $HOME/rpmbuild/SOURCES/
      - name: Install pmix-specific pkgs
        run: |
          dnf install -y zlib-devel hwloc-devel libevent-devel python3-devel jansson-devel
          python3 -m pip install sphinx
      - name: Download pmix and unpack it
        run: |
          wget https://github.com/openpmix/openpmix/releases/download/v4.2.7/pmix-4.2.7.tar.bz2
          pwd
          whoami
          
      
